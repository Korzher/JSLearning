<!DOCTYPE html>
<script>

function cutArr(arr) {
    while (arr.at(-1) < 0) {
        arr.pop();
    }
    if (arr.length == 0) return 0;
    while (arr[0] < 0) {
        arr.shift();
    }
    return arr;
}

function getMaxSubSum(arr) {
    cutArr(arr);
    let subArray = [];
    let a;
    let b;
    if (arr.length == 0) return 0;
    if (arr.length == 1) return arr[0];
    subArray.push(arr[0]);
    subArray.push(arr.at(-1));
    while (arr.length > 1) {
    if (arr[1] >= 0 && isFinite(+arr[1])) {
      arr.unshift(+arr.shift() + +arr.shift()); 
      subArray.push(arr[0]);
    }
    if (arr[1] < 0) {
        if (+arr[0] + +arr[1] > 0) {
            arr.unshift(+arr.shift() + +arr.shift());
            subArray.push(arr[0]);
        } else {
            arr.shift();
            arr.shift();
            arr.unshift(0);
        }
    }
}
    while (1 < subArray.length) {
        if (subArray[0] > subArray[1]) {
            a = subArray[0];
            subArray.shift();
            subArray.shift();
            subArray.push(a);
        } else {
            b = subArray[1];
            subArray.shift();
            subArray.shift();
            subArray.push(b);
        }
    }



    return (subArray[0]); 

}

getMaxSubSum(cutArr([2, -8, 5, -1, 2, -3, 2]));

</script>




